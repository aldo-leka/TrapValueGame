@namespace TrapValueGame.Components.Game

<MudStack AlignItems="AlignItems.Center" Justify="Justify.Center" Class="min-vh-50 py-16">
    <MudIcon Icon="@Icons.Material.Filled.ErrorOutline"
             Color="Color.Error"
             Size="Size.Large" />

    <MudText Typo="Typo.h5" Class="mt-4">
        Something went wrong
    </MudText>

    <MudText Typo="Typo.body1" Color="Color.Secondary" Align="Align.Center" Class="mt-2" Style="max-width: 400px;">
        @(Message ?? "An unexpected error occurred. Please try again.")
    </MudText>

    <MudStack Row="true" Spacing="3" Class="mt-6">
        <MudButton
            Variant="Variant.Filled"
            Color="Color.Primary"
            StartIcon="@Icons.Material.Filled.Refresh"
            OnClick="@(() => OnRetry.InvokeAsync())">
            Try Again
        </MudButton>

        @if (ShowResetOption)
        {
            <MudButton
                Variant="Variant.Outlined"
                Color="Color.Warning"
                StartIcon="@Icons.Material.Filled.RestartAlt"
                OnClick="@(() => OnResetHistory.InvokeAsync())">
                Reset History
            </MudButton>
        }
    </MudStack>

    @if (ShowResetOption)
    {
        <MudText Typo="Typo.caption" Color="Color.Secondary" Class="mt-2">
            Reset will clear your played history and let you see all snapshots again.
        </MudText>
    }
</MudStack>

@code {
    [Parameter]
    public string? Message { get; set; }

    [Parameter]
    public EventCallback OnRetry { get; set; }

    [Parameter]
    public EventCallback OnResetHistory { get; set; }

    [Parameter]
    public bool ShowResetOption { get; set; }
}

<style>
    .min-vh-50 {
        min-height: 50vh;
    }
</style>
